<?php
error_reporting(E_ALL);
include 'entete.php';
entete('tableau_en_select');
function tableau_en_select($tab, $chaine) {
    $form="<body>\n".
        "<form action='tableau_en_select.php' method='post'>\n<fieldset>\n".
        "<input type='hidden' name='chaine' value="$chaine"/>\n".
        "<select name='annee'>\n";
    foreach ($tab as $key => $value) {
        $form.="<optgroup label="$key">\n";
        foreach ($key as $k1 => $v1) {
            $form.="<option>$k1</option>\n";
        }
    }
    $form.="<input type='submit' value='bouton de soumission'/>".
        "</fieldset>\n</form>\n</body>\n</html>\n";

    return $form;
}

tableau_en_select($desc_diplomes, 'ahmed');

<?